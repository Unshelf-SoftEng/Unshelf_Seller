<!DOCTYPE html>
<html>
  <head>
    <base href="$FLUTTER_BASE_HREF" />
    <meta charset="UTF-8" />
    <meta content="IE=Edge" http-equiv="X-UA-Compatible" />
    <meta name="description" content="A new Flutter project." />
    <title>Map</title>
    <script
      src="https://maps.googleapis.com/maps/api/js?key=YOUR_API_KEY&callback=initMap"
      async
      defer
    ></script>
    <script>
      function initMap() {
        const mapDiv = document.getElementById("map");
        if (!mapDiv) {
          console.error("Map container not found");
          return;
        }

        window.map = new google.maps.Map(mapDiv, {
          center: { lat: 0, lng: 0 },
          zoom: 8,
        });

        window.marker = new google.maps.Marker({
          position: { lat: 0, lng: 0 },
          map: window.map,
          draggable: true,
        });

        google.maps.event.addListener(
          window.marker,
          "position_changed",
          function () {
            var position = window.marker.getPosition();
            window.selectedLocation = {
              lat: position.lat(),
              lng: position.lng(),
            };
          }
        );
      }
    </script>
  </head>
  <body>
    <div id="map" style="height: 500px; width: 100%"></div>
  </body>
</html>
